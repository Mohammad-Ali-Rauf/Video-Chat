(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,a){},120:function(e,a){},136:function(e,a,t){},137:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(8),c=t.n(l),i=t(177),o=t(172),m=t(139),s=t(170),u=t(138),d=t(167),p=t(25),f=t(82),g=t(56),b=t.n(g),E=Object(n.createContext)(),v=Object(f.a)("https://video-chat-app-ali.herokuapp.com/"),j=function(e){var a=e.children,t=Object(n.useState)(null),l=Object(p.a)(t,2),c=l[0],i=l[1],o=Object(n.useState)(""),m=Object(p.a)(o,2),s=m[0],u=m[1],d=Object(n.useState)({}),f=Object(p.a)(d,2),g=f[0],j=f[1],x=Object(n.useState)(!1),O=Object(p.a)(x,2),h=O[0],C=O[1],y=Object(n.useState)(!1),w=Object(p.a)(y,2),N=w[0],k=w[1],I=Object(n.useState)(""),S=Object(p.a)(I,2),D=S[0],B=S[1],A=Object(n.useRef)(),R=Object(n.useRef)(),V=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){i(e),A.current.srcObject=e})),v.on("me",(function(e){return u(e)})),v.on("calluser",(function(e){var a=e.from,t=e.name,n=e.signal;j({isReceivedCall:!0,from:a,name:t,signal:n})}))}),[]);return r.a.createElement(E.Provider,{value:{call:g,callAccepted:h,myVideo:A,userVideo:R,stream:c,name:D,setName:B,callEnded:N,me:s,callUser:function(e){var a=new b.a({initiator:!0,trickle:!1,stream:c});a.on("signal",(function(a){v.emit("calluser",{userToCall:e,signalData:a,from:s,name:D})})),a.on("stream",(function(e){R.current.srcObject=e})),v.on("callaccepted",(function(e){C(!0),a.signal(e)})),V.current=a},leaveCall:function(){k(!0),V.current.destroy(),window.location.reload()},answerCall:function(){C(!0);var e=new b.a({initiator:!1,trickle:!1,stream:c});e.on("signal",(function(e){v.emit("answercall",{signal:e,to:g.from})})),e.on("stream",(function(e){R.current.srcObject=e})),e.signal(g.signal),V.current=e}}},a)},x=Object(d.a)((function(e){return{video:{width:"550px"},gridContainer:{justifyContent:"center"},paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),O=function(){var e=Object(n.useContext)(E),a=e.name,t=e.callAccepted,l=e.myVideo,c=e.userVideo,i=e.callEnded,m=e.stream,d=e.call,p=x();return r.a.createElement(s.a,{container:!0,className:p.gridContainer},m&&r.a.createElement(u.a,{className:p.paper},r.a.createElement(s.a,{item:!0,xs:12,md:6},r.a.createElement(o.a,{variant:"h5",gutterBottom:!0},a||"Name"),r.a.createElement("video",{playsInline:!0,muted:!0,ref:l,autoPlay:!0,className:p.video}))),t&&!i&&r.a.createElement(u.a,{className:p.paper},r.a.createElement(s.a,{item:!0,xs:12,md:6},r.a.createElement(o.a,{variant:"h5",gutterBottom:!0},d.name||"Name"),r.a.createElement("video",{playsInline:!0,ref:c,autoPlay:!0,className:p.video}))))},h=t(179),C=function(){var e=Object(n.useContext)(E),a=e.answerCall,t=e.call,l=e.callAccepted;return r.a.createElement(r.a.Fragment,null,t.isReceivedCall&&!l&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h1",null,t.name," is calling: "),r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:a},"Answer")))},y=t(57),w=t(173),N=t(178),k=t(81),I=t(174),S=t(175),D=t(176),B=Object(d.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(y.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(y.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),A=function(e){var a=e.children,t=Object(n.useContext)(E),l=t.me,c=t.callAccepted,i=t.name,m=t.setName,d=t.callEnded,f=t.leaveCall,g=t.callUser,b=Object(n.useState)(""),v=Object(p.a)(b,2),j=v[0],x=v[1],O=B();return r.a.createElement(w.a,{className:O.container},r.a.createElement(u.a,{elevation:10,className:O.paper},r.a.createElement("form",{className:O.root,noValidate:!0,autoComplete:"off"},r.a.createElement(s.a,{container:!0,className:O.gridContainer},r.a.createElement(s.a,{item:!0,xs:12,md:6,className:O.padding},r.a.createElement(o.a,{gutterBottom:!0,variant:"h6"},"Account Info"),console.log(l),r.a.createElement(N.a,{label:"Name",value:i,onChange:function(e){return m(e.target.value)},fullWidth:!0}),r.a.createElement(k.CopyToClipboard,{text:l,className:O.margin},r.a.createElement(h.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:r.a.createElement(I.a,{fontSize:"large"})},"Copy Your ID"))),r.a.createElement(s.a,{item:!0,xs:12,md:6,className:O.padding},r.a.createElement(o.a,{gutterBottom:!0,variant:"h6"},"Make a call"),r.a.createElement(N.a,{label:"ID to Call",value:j,onChange:function(e){return x(e.target.value)},fullWidth:!0}),c&&!d?r.a.createElement(h.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(S.a,{fontSize:"large"}),fullWidth:!0,onClick:f,className:O.margin},"Hang Up"):r.a.createElement(h.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(D.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return g(j)},className:O.margin},"Call")))),a))},R=Object(m.a)((function(e){return{appBar:{borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),V=function(){var e=R();return r.a.createElement("div",{className:e.wrapper},r.a.createElement(i.a,{className:e.appBar,position:"static",color:"inherit"},r.a.createElement(o.a,{variant:"h2",align:"center"},"VideoChat")),r.a.createElement(O,null),r.a.createElement(A,null,r.a.createElement(C,null)))};t(136);c.a.render(r.a.createElement(j,null,r.a.createElement(V,null)),document.getElementById("root"))},90:function(e,a,t){e.exports=t(137)}},[[90,1,2]]]);
//# sourceMappingURL=main.6c64b728.chunk.js.map